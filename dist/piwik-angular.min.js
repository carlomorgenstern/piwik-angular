!function(e){"use strict";var t=e.module("piwik-angular",[]);t.constant("PiwikActions",["trackEvent","trackPageView","trackSiteSearch","trackGoal","trackLink","trackAllContentImpressions","trackVisibleContentImpressions","trackContentImpressionsWithinNode","trackContentInteractionNode","trackContentImpression","trackContentInteraction","logAllContentBlocksOnPage","enableLinkTracking","enableHeartBeatTimer","setDocumentTitle","setDomains","setCustomUrl","setReferrerUrl","setSiteId","setApiUrl","setTrackerUrl","setDownloadClasses","setDownloadExtensions","addDownloadExtensions","removeDownloadExtensions","setIgnoreClasses","setLinkClasses","setLinkTrackingTimer","discardHashTag","setGenerationTimeMs","appendToTrackingUrl","setDoNotTrack","disableCookies","deleteCookies","killFrame","redirectFile","setHeartBeatTimer","setUserId","setCustomVariable","deleteCustomVariable","storeCustomVariablesInCookie","setCustomDimension","deleteCustomDimension","setCampaignNameKey","setCampaignKeywordKey","setConversionAttributionFirstReferrer","setEcommerceView","addEcommerceItem","trackEcommerceCartUpdate","trackEcommerceOrder","setCookieNamePrefix","setCookieDomain","setCookiePath","setVisitorCookieTimeout","setReferralCookieTimeout","setSessionCookieTimeout","addListener","setRequestMethod","setCustomRequestProcessing","setRequestContentType","addTracker","setCustomData","setCountPreRendered","enableJSErrorTracking","disablePerformanceTracking"]),t.constant("PiwikGets",["getVisitorId","getVisitorInfo","getAttributionInfo","getAttributionCampaignName","getAttributionCampaignKeyword","getAttributionReferrerTimestamp","getAttributionReferrerUrl","getUserId","getCustomVariable","getCustomDimension","getTrackerUrl","getSiteId","getRequest","getCustomData"]),t.service("PiwikTracker",["$q","$window","PiwikActions","PiwikGets",function(e,t,r,i){function s(e,r){r[e]=function(){for(var r=[e],i=0;i<arguments.length;i++)r.push(arguments[i]);return t._paq.push(r)}}function n(r,i){i[r]=function(){var i=e.defer(),s=arguments;return t._paq.push(function(){try{return i.resolve(this[r].apply(this,s))}catch(e){return i.reject(e)}}),i.promise}}t._paq=t._paq||[];var o;for(o=0;o<r.length;o++)s(r[o],this);for(o=0;o<i.length;o++)n(i[o],this);this.setupPiwik=function(){var e=!1;return function(r,i){if(!e){r.replace(/\/+$/,""),t._paq.push(["setTrackerUrl",r+"/piwik.php"]),t._paq.push(["setSiteId",i]);var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.defer=!0,s.src=r+"/piwik.js",document.head.appendChild(s)}}}()}])}(angular);